{% extends "base.html" %}

{% block title %}Dashboard{% end %}

{% block body %}
<section class="content-header">
    <h1>
        Dashboard  (last {{ daysago }} days)
    </h1>
    <ol class="breadcrumb">
        <li><a href="/"><i class="fa fa-dashboard"></i> Home</a></li>
        <li class="active">Dashboard</li>
    </ol>
</section>
<!-- Main content -->
<section class="content">
    <!-- Small boxes (Stat box) -->
    <div class="row">
        <div style="display:table" class="col-md-3">
            <div id="peoplesources" style="width: 100%"></div>
        </div>
        <div style="display:table" class="col-md-2">
            <div id="topcountries" style="width: 100%"></div>
            <div id="totalusers" style="width: 100%"></div>
        </div>
        <div style="display:table" class="col-md-6">
            <div id="toppages" style="width: 100%"></div>
        </div>


        <div style="display:table" class="col-md-3">
            <div id="topkeywords" style="width: 100%"></div>
        </div>
        <div style="display:table" class="col-md-4">
            <div id="referrers" style="width: 100%"></div>
        </div>
        <div style="display:table" class="col-md-4">
            <div id="browsers-os" style="width: 100%"></div>
        </div>
    </div>
</section>

{% end body %}
{% block endjs %}



<script>
    $(document).ready(function() {
        function loadFeed() {
            console.log("Loading data...");
            $('#peoplesources').load('/people-sources #data-box');

            $('#topcountries').load('/top-countries #data-box');

            $('#toppages').load('/top-pages #data-box');

            $('#topkeywords').load('/top-keywords #data-box');

            $('#totalusers').load('/total-users #data-box');

            $('#referrers').load('/referrers #data-box');

            $('#browsers-os').load('/top-browser-n-os');
        }
        loadFeed();
        setInterval(loadFeed, 300 * 1e3); // every 5 minutes [300 seconds]
    });
</script>


{% end endjs %}